<div class="container">
  <h1>ohai, it's ma blog</h1>

  <div class="row">
    <div class="col-sm-6">
    <form name="form" ng-submit="vm.createPost()">
      <div class="form-group" ng-class="{'has-error': form.title.$dirty && form.title.$invalid}">
        <label class="control-label" for="post-title">Title</label>
        <input type="text"
               class="form-control"
               id="post-title"
               ng-model="vm.newPost.title"
               ng-model-options="{ updateOn: 'default blur', debounce: {'default': 300, 'blur': 0} }"
               name="title"
               required
               server-validator>

        <div ng-if="form.title.$pending">
          <i class="fa fa-life-bouy faa-spin animated"></i> Checking Title...
        </div>
        <ng-messages for="form.title.$error" ng-if="form.title.$dirty">
          <ng-message when="required" class="warning">This is required</ng-message>
          <ng-message when="serverValidator" class="warning">This title has been used already</ng-message>
        </ng-messages>
      </div>

      <div class="form-group" ng-class="{'has-error': form.body.$dirty && form.body.$invalid}">
        <label class="control-label" for="post-body">Body</label>
        <textarea class="form-control"
                  id="post-body"
                  ng-model="vm.newPost.body"
                  ng-model-options="{ updateOn: 'default blur', debounce: {'default': 300, 'blur': 0} }"
                  name="body"
                  required server-validator></textarea>
        <div ng-if="form.body.$pending">
          <i class="fa fa-life-bouy faa-spin animated"></i> Checking Body...
        </div>
        <ng-messages for="form.body.$error" ng-if="form.body.$dirty">
          <ng-message when="required" class="warning">This is required</ng-message>
          <ng-message when="serverValidator" class="warning">This body has been used already</ng-message>
        </ng-messages>
      </div>
      <input type="submit" class="btn btn-primary" ng-disabled="form.$invalid || form.$pending" />
    </form>
    </div>
  </div>

  <div class="row" ng-repeat="post in vm.allPosts">
    <div class="col-sm-6">
      <h2>{{ post.title }}</h2>
      <p>{{ post.body }}</p>
    </div>
  </div>

</div>
